import type { Jsonify } from "type-fest";
import type { AppData } from "./data";
import type { TypedDeferredData, TypedResponse } from "./responses";
type Fn = (...args: any[]) => any;
/**
 * Infer JSON serialized data type returned by a loader or action.
 *
 * For example:
 * `type LoaderData = SerializeFrom<typeof loader>`
 */
export type SerializeFrom<T extends AppData | Fn> = T extends (...args: any[]) => infer Output ? Awaited<Output> extends TypedResponse<infer U> ? Jsonify<U> : Awaited<Output> extends TypedDeferredData<infer U> ? {
    [K in keyof U as K extends symbol ? never : Promise<any> extends U[K] ? K : never]: DeferValue<U[K]>;
} & Jsonify<{
    [K in keyof U as Promise<any> extends U[K] ? never : K]: U[K];
}> : Jsonify<Awaited<Output>> : Jsonify<Awaited<T>>;
type DeferValue<T> = T extends undefined ? undefined : T extends Promise<unknown> ? Promise<Jsonify<Awaited<T>>> : Jsonify<T>;
export {};
